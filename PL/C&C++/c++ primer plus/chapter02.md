# 2.开始学习C++
## 2.1 进入C++
C++对大小写敏感，程序使用C++工具cout生成字符输出。
```
//myfirst.cpp
#include <iostream>
int main()
{
    using namespace std;
    cout << "Hello";
    cout << endl;
    cout << "World!"<< endl;
    return 0;
}
```
> 有些窗口环境在独立的窗口中运行程序，并在程序运行完毕后自动关闭该窗口。要让窗口一直打开，直到您按任何键，可在return语句前添加如下语句：
> `cin.get`
> 对于有些程序，要让窗口一直打开，直到您按任何键，必须添加两条这样的语句。
> 只需要包含常规C语言的stdio.h文件,C++能够使用printf( )、scanf( )和其他所有标准C输入和输出函数。
myfirst.cpp示例包含下述元素:
-注释，由前缀//标识。
-预处理器编译指令#include。
-函数头：int main( )。
-编译指令using namespace。
-函数体，用{和}括起。
-使用C++的cout工具显示消息的语句。
-结束main( )函数的return语句。
### 2.1.1 main()函数
程序基本结构如下：
```
int main()
{
    statements;
    return 0;
}
```
这几行表明有一个名为main( )的函数，并描述了该函数的行为。这几行代码构成了函数定义（function definition）。
第一行int main( )叫**函数头**（function heading），花括号({和})中包括的部分叫**函数体**。
函数头对函数与程序其他部分之间的接口进行了总结；函数体是指出函数应做什么的计算机指令。
在C++中，每条完整的指令都称为语句。所有的语句都以分号结束，因此在输入示例代码时，请**不要省略分号**。
main( )中最后一条语句叫做**返回语句**（return statement），它结束该函数。
#### 1.作为接口的函数头
C++句法要求main( )函数的定义以函数头int main( )开始。
通常，C++函数可被其他函数激活或调用，函数头描述了函数与调用它的函数之间的接口。位于函数名前面的部分叫做**函数返回类型**，它描述的是从函数返回给调用它的函数的信息。函数名后括号中的部分叫做**形参列表**（argument list）或**参数列表**（parameter list）；它描述的是从调用函数传递给被调用的函数的信息。
通常，main( )被启动代码调用，该函数头描述的是main( )和操作系统之间的接口。
C++函数可以给调用函数返回一个值，这个值叫做返回值（return value）。
也可以使用下面的变体：
`int main(void)`
中使用关键字void明确地指出，函数不接受任何参数。
如果编译器到达main( )函数末尾时没有遇到返回语句，则认为main( )函数以如下语句结尾：
`return 0;`
#### 2.为什么main( )不能使用其他名称
C++程序必须包含一个名为main( )的函数，在运行C++程序时，通常从main( )函数开始执行。
### 2.1.2 C++注释
C++注释以双斜杠（//）打头。
### 2.1.3 C++预处理器和iostream文件
如果程序要使用C++输入或输出工具，请提供这样两行代码：
```
#include <iostream>
using namespace std;
```
使用一个预处理器，该程序在进行主编译之前对源文件进行处理，即它处理名称以#开头的编译指令。
该编译指令导致预处理器将iostream文件的内容添加到程序中。这是一种典型的预处理器操作：在源代码被编译之前，替换或添加文本。#include编译指令导致iostream文件的内容随源代码文件的内容一起被发送给编译器。iostream文件的内容将取代程序中的代码行#include <iostream>。原始文件没有被修改，而是将源代码文件和iostream组合成一个复合文件，编译的下一阶段将使用该文件。
### 2.1.4 头文件名
像iostream这样的文件叫做包含文件（include file），也叫头文件（header file）。现在，对老式C的头文件保留了扩展名h，而C++头文件则没有扩展名。有些C头文件被转换为C++头文件，这些文件被重新命名，去掉了扩展名h，并在文件名称前面加上前缀c。没有h的头文件也可以包含名称空间—本章的下一个主题。
### 2.1.5 名称空间
如果使用iostream，而不是iostream.h，则应使用下面的名称空间编译指令来使iostream中的定义对程序可用：
`using namespace std;`
这叫做using编译指令。类、函数和变量便是C++编译器的标准组件，它们现在都被放置在名称空间std中。仅当头文件没有扩展名h时，情况才是如此。这意味着在iostream中定义的用于输出的cout变量实际上是std::cout，而endl实际上是std::endl。
### 2.1.6 使用cout进行C++输出
`cout << "Hello";`
双引号括起的部分是要打印的消息。在C++中，用双引号括起的一系列字符叫做字符串。<<符号表示该语句将把这个字符串发送给cout；该符号指出了信息流动的路径。
从概念上看，输出是一个流，即从程序流出的一系列字符。cout对象表示这种流，cout的对象属性包括一个插入运算符（<<），它可以将其右侧的信息插入到流中。与其说程序显示了一条消息，不如说它将一个字符串插入到了输出流中。
#### 1.控制符endl
endl表示重起一行。在输出流中插入endl将导致屏幕光标移到下一行开头。称为**控制符**（manipulator）。和cout一样，endl也是在头文件iostream中定义的，且位于名称空间std中。
#### 2.换行符
\n被视为一个字符，名为**换行符**。
endl确保程序继续运行前刷新输出（将其立即显示在屏幕上）；而使用“\n”不能提供这样的保证，这意味着在有些系统中，有时可能在您输入信息后才会出现提示。
### 2.1.7 C++源代码的格式化
在C++中，分号标示了语句的结尾。回车的作用是将语句分开。
既可以把一条语句放在几行上，也可以把几条语句放在同一行上。
不能把空格、制表符或回车放在元素（比如名称）中间，也不能把回车放在字符串中间。
#### 1.源代码中的标记和空白
一行代码中不可分割的元素叫做**标记**（token）。通常，必须用空格、制表符或回车将两个标记分开，空格、制表符和回车统称为空白（white space）。有些字符（如括号和逗号）是不需要用空白分开的标记。
#### 2.C++源代码风格
-每条语句占一行。
-每个函数都有一个开始花括号和一个结束花括号，这两个花括号各占一行。
-函数中的语句都相对于花括号进行缩进。
-与函数名称相关的圆括号周围没有空白。
## 2.2 C++语句
C++程序是一组函数，而每个函数又是一组语句。声明语句创建变量，赋值语句给该变量提供一个值。
空行将声明语句与程序的其他部分分开。这是C常用的方法，但在C++中不那么常见。
```
// carrots.cpp
#include <iostream>

int main()
{
    using namespace std;

    int carrots;

    carrots = 25;
    cout << carrots;
    carrots = carrots - 1;
    cout << carrots;
    return 0;
}
```
### 2.2.1 声明语句和变量
要将信息项存储在计算机中，必须指出信息的存储位置和所需的内存空间。在C++中,是使用声明语句来指出存储类型并提供位置标签。
`int carrot;`
这条语句提供了两项信息：需要的内存以及该内存单元的名称。编译器负责分配和标记内存的细节。C++的int类型可以为正，也可以为负，但是大小范围取决于实现。
第二项任务是给存储单元指定名称。在C++中，所有变量都必须声明。
程序中的声明语句叫做**定义声明**（defining declaration）语句，简称为**定义**（definition）。这意味着它将导致编译器为变量分配内存空间。在较为复杂的情况下，还可能有**引用声明**（reference declaration）。声明不一定是定义。
### 2.2.2 赋值语句
赋值语句将值赋给存储单元。
`carrot = 25;`
符号=叫做赋值运算符。C++（和C）有一项不寻常的特性—可以**连续使用赋值运算符**。
赋值将**从右向左**进行。
可以对变量的值进行修改。
`carrots = carrots - 1;`
### 2.2.3 cout的新花样
使用cout来打印变量，该变量的值是一个整数
`cout << carrots;`
首先，cout将carrots替换为其当前值25；然后，把值转换为合适的输出字符。在打印之前，cout必须将整数形式的数字转换为字符串形式。
## 2.3 其他C++语句
要求在程序运行时输入一个值。
```
//getinfo.cpp
#include <iostream>
int main()
{
    using namespace std;
    
    int carrots;

    cin >> carrot;
    carrot = carrot + 2;
    cout << "Now you have" << carrots << "carrots" << endl;
    return 0;
}
```
### 2.3.1 使用cin
`cin >> carrot;`
输入时，cin使用>>运算符从输入流中抽取字符。它可以将通过键盘输入的一系列字符（即输入）转换为接收信息的变量能够接受的形式。
### 2.3.2 使用cout进行拼接
`cout << "Now you have" << carrots << "carrots" << endl;`
这样能够将字符串输出和整数输出合并为一条语句。
也可以按照这样的方式重写拼接版本。C++的自由格式规则将标记间的换行符和空格看作是可相互替换的。
```
cout << "Now you have" 
     << carrots 
     << "carrots" 
     << endl;
```
cout语句的输出紧跟在前一条cout语句的输出后面。
### 2.3.3 类简介
类是用户定义的一种数据类型。要定义类，需要描述它能够表示什么信息和可对数据执行哪些操作。类之于对象就像类型之于变量。也就是说，**类**定义描述的是数据格式及其用法，而**对象**则是根据数据格式规范创建的实体。
`int carrot;`
上面的代码将创建一个类型为int的变量（carrots）。也就是说，carrots可以存储整数，可以按特定的方式使用—例如，用于加和减。现在来看cout。它是一个ostream类对象。同样，cin是一个istream类对象。
> 类描述了一种数据类型的全部属性（包括可使用它执行的操作），对象是根据这些描述创建的实体。
类也可以来自类库。ostream和istream类就属于这种情况。这些类定义位于iostream文件中，没有被内置到编译器中。iostream系列类和相关的fstream（或文件I/O）系列类是早期所有的实现都自带的唯一两组类定义。
类描述指定了可对类对象执行的所有操作。要对特定对象执行这些允许的操作，需要给该对象发送一条消息。
C++提供了两种发送消息的方式：一种方式是**使用类方法**；另一种方式是**重新定义运算符**。
## 2.4 函数
C++函数分两种：有返回值的和没有返回值的。
### 2.4.1 使用有返回值的函数
有返回值的函数将生成一个值，而这个值可赋给变量或在其他表达式中使用。
`x = sqrt(6.25)`
表达式sqrt(6.25)将调用sqrt( )函数。表达式sqrt(6.25)被称为**函数调用**，被调用的函数叫做**被调用函数**（called function），包含函数调用的函数叫做**调用函数**（calling function)。
圆括号中的值（这里为6.25）是发送给函数的信息，这被称为**传递**给函数。以这种方式发送给函数的值叫做**参数**。函数sqrt( )得到的结果为2.5，并将这个值发送给调用函数；发送回去的值叫做函数的**返回值**（return value）。函数执行完毕后，语句中的函数调用部分将被替换为返回的值。参数是发送给函数的信息，返回值是从函数中发送回去的值。
在使用函数之前，C++编译器必须知道函数的参数类型和返回值类型。C++提供这种信息的方式是使用**函数原型**语句。
函数原型之于函数就像变量声明之于变量—指出涉及的类型。
`double sqrt(double);`
第一个double意味着sqrt( )将返回一个double值。括号中的double意味着sqrt( )需要一个double参数。
原型结尾的分号表明它是一条语句，这使得它是一个原型，而不是函数头。原型只描述函数接口,它描述的是发送给函数的信息和返回的信息。而定义中包含了函数的代码，如计算平方根的代码。库文件中包含了函数的编译代码，而头文件中则包含了原型。
C++允许在程序的任何地方声明新变量。还允许在创建变量时对它进行赋值。
`double side = sqrt(area);`
这个过程叫做**初始化**（initialization）
### 2.4.2 函数变体
有些函数需要多项信息。这些函数使用多个参数，参数间用逗号分开。
`double pow(double,double);`
另外一些函数不接受任何参数。
`int rand(void);`
函数调用中必须包括括号，即使没有参数。
还有一些函数没有返回值。因此不能将该函数调用放在赋值语句或其他表达式中。
`void bucks(double);`
在有些语言中，有返回值的函数被称为函数（function）；没有返回值的函数被称为过程（procedure）或子程序（subroutine）。
### 2.4.3 用户定义的函数
对于库函数，在使用之前必须提供其原型，通常把原型放到main( )定义之前。
将代码放在main( )的后面。
```
// ourfunc.cpp
#include <iostream>
void simon(int);

int main()
{
    using namespace std;
    simon(3);
    int count;
    cin >> count;
    simon(count);
    cout << "Done!" << endl;
    return 0;
}

void simon(int n)
{
    using namespace std;
    cout << n << endl;
}
```
#### 1.函数格式
```
type functionname(argumentlist)
{
    sratements
}
```
定义simon( )的源代码位于main( )的后面。C++不允许将函数定义嵌套在另一个函数定义中。每个函数定义都是独立的，所有函数的创建都是平等的。
#### 2.函数头
`void simon(int n)`
simon( )的函数头表明，该函数接受一个int参数，不返回任何值。
main( )的返回值并不是返回给程序的其他部分，而是返回给操作系统。退出值为0则意味着程序运行成功，为非零则意味着存在问题。
### 2.4.4 用户定义的有返回值的函数
在函数头中指出返回类型，在函数体结尾处使用return。
```
//convert.cpp
#include <iostream>
int stonetolb(int);
int main()
{
    using namespace std;
    int stone;
    cin >> stone;
    int pounds = stonetolb(stone);
    cout << stone << " stone = ";
    cout << pounds << " pounds."<<endl;
    return 0;
}
int stonetolb(int sts)
{
    return 14 * sts;
}
```
在main( )中，程序使用cin来给整型变量stone提供一个值。这个值被作为参数传递给stonetolb( )函数，在该函数中，这个值被赋给变量sts。然后，stonetolb( )用关键字return将14*sts返回给main( )。return后面并非一定得跟一个简单的数字。
通常，在可以使用一个简单常量的地方，都可以使用一个返回值类型与该常量相同的函数。
函数原型描述了函数接口，即函数如何与程序的其他部分交互。参数列表指出了何种信息将被传递给函数，函数类型指出了返回值的类型。
函数特性：
-有函数头和函数体；
-接受一个参数；
-返回一个值；
-需要一个原型。
### 2.4.5 在多函数程序中使用using编译指令
可以采用另一种方法让两个函数都能够访问名称空间std，即将编译指令放在函数的外面，且位于两个函数的前面：
当前通行的理念是，只让需要访问名称空间std的函数访问它是更好的选择。
让程序能够访问名称空间std的方法有:
-将using namespace std;放在函数定义之前，让文件中所有的函数都能够使用名称空间std中所有的元素。
-将using namespace std;放在特定的函数定义中，让该函数能够使用名称空间std中的所有元素。
-在特定的函数中使用类似using std::cout;这样的编译指令，而不是using namespace std;，让该函数能够使用指定的元素，如cout。
-完全不使用编译指令using，而在需要使用名称空间std中的元素时，使用前缀std::
## 2.5 总结
C++语句，包括下述6种
-声明语句：定义函数中使用的变量的名称和类型。
-赋值语句：使用赋值运算符（=）给变量赋值。
-消息语句：将消息发送给对象，激发某种行动。
-函数调用：执行函数。被调用的函数执行完毕后，程序返回到函数调用语句后面的语句。
-函数原型：声明函数的返回类型、函数接受的参数数量和类型。
-返回语句：将一个值从被调用的函数那里返回到调用函数中。